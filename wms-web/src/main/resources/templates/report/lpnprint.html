<!DOCTYPE html>
<html>
<head>
    <title wms:text="${wms.lpn.print}">LPN 打印</title>
    <head th:replace="common/head" />
</head>
<body class="easyui-layout" >
	<div data-options="region:'north'" style="height:120px;">
		<div class="tableToolbar">
			<a href="#" class="easyui-linkbutton" onclick="generator()">
				<span wms:text="${web.label.generrator}">Generator</span>
			</a>
			<a href="#" class="easyui-linkbutton" onclick="print()">
				<span wms:text="${web.label.print}">Print</span>
			</a>
		</div>
		<div id="condition">
			<form id="printForm">
				<table>
					<tr>
						<td width="200"><input id="ownerCode" name="ownerCode" th:replace="lov/owner" /></td>
						<td width="200"><input name="count" class="easyui-numberbox" value="1" wms:data-options="label:'${web.label.quantity}',labelPosition:'top'" /></td>
						<td>&nbsp;</td>
					</tr>
				</table>
			</form>
		</div>
	</div>
	<div data-options="region:'center',border:false" >
		<iframe id="lpnContent" frameborder="0" style="width: 100%;height: 99%;overflow: none;"></iframe>
	</div>
</body>
<script th:replace="common/js" />
<script type="text/javascript" th:inline="text">
	$(function(){
		lazyLoadView('#condition');
	});
	
	function generator(){
		var valid = $('#printForm').form('validate');
		if (!valid) {
			return;
		}
		var params = $('#printForm').serializeObject();
		var baseData = getBaseData(params);
		loading();
		$.post({
			url: '../../services/inner/report/print/lpn',
			data:  baseData,
			success: function(data){
				data = returnData(data);
				closeLoading();
				if (data.code == '0') {
					showError(data.msg);
					return;
				}
				baseData['batchId'] =  data.data;
				var reportUrl = getReportUrl('/report/pdf/LPN', baseData);
				$('#lpnContent')[0].src = reportUrl;
			}
		});
	}
	
	function print(){
		$('#lpnContent')[0].contentWindow.print();
	}
</script>
</html>
